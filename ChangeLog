2006-03-10  Alan Coopersmith  <alan.coopersmith@sun.com>

	* src/radeon_driver.c: 
	Add #ifdef XF86DRI guards around references to info->allowPageFlip
	and info->depthMoves, since they are only defined if building with
	DRI.

2006-03-10  Roland Scheidegger  <rscheidegger_lists@hispeed.ch>
	* man/radeon.man:
	* src/radeon_driver.c: (RADEONSetupMemXAA_DRI), (RADEONScreenInit):
	Use "FBTexPercent" option for XAA too (only for increasing
	memory reserved for textures).

2006-03-10  Benjamin Herrenschmidt  <benh@kernel.crashing.org>

	* src/radeon.h:
	* src/radeon_dri.c: (RADEONDRIGartHeapInit), (RADEONDRIGetVersion),
	(RADEONDRIScreenInit), (RADEONDRIInitPageFlip), (RADEONDRIResume),
	(RADEONDRIAllocatePCIGARTTable):
	* src/radeon_driver.c: (RADEONInitMemoryMap),
	(RADEONGetAccessibleVRAM), (RADEONPreInitConfig),
	(RADEONPreInitDRI), (RADEONPreInitColorTiling), (RADEONPreInit),
	(RADEONScreenInit), (RADEONRestoreMode):
	More memory map fixes !!! This time, we add a way to get the DRM
	kernel module version early, in order to properly limit the
	framebuffer size when a module that doesn't support the new map is
	loaded. That will improve backward compatibility. I also made the
	minimum required kernel module version 1.3 which hopefully shouldn't
	be a problem for anybody, and cleaned up the ordering in which we test
	for DRM version to enable features

2006-03-09  Michel Dänzer  <michel@daenzer.net>

	* src/radeon_driver.c: (RADEONGetClockInfo), (RADEONGetVRamType),
	(RADEONPreInitConfig):
	Bugzilla #5766 <https://bugs.freedesktop.org/show_bug.cgi?id=5766>
	Patch #4636  <https://bugs.freedesktop.org/attachment.cgi?id=4636>
	- Acknowledge that RN50 only has one CRTC, and use this to distinguish
	  it from RV100.
	- Fix detection of RN50 memory type and bus width.
	- Model RN50 memory bandwidth limits by capping the pixel clock range
	  based on memory clock, bpp and memory bus width.
	(ATI Technologies Inc.)

2006-03-03  Michel Dänzer  <michel@daenzer.net>

	* man/radeon.man:
	* src/radeon_driver.c: (RADEONScreenInit):
	* src/radeon_exa.c: (RADEONSetupMemEXA):
	Add Option "FBTexPercent" to override the amount of video RAM reserved
	for OpenGL textures with EXA.

2006-03-02  Benjamin Herrenschmidt  <benh@kernel.crashing.org>

	* src/radeon_driver.c: (RADEONPreInitConfig):
	Fix the fix ... I didn't interpret PciInfo->size properly and forgot
	that the function works in Kb not bytes... Ooops.

2006-03-02  Benjamin Herrenschmidt  <benh@kernel.crashing.org>

	* src/radeon_driver.c: (RADEONInitMemoryMap),
	(RADEONPreInitConfig):
	Extend the alignement workaround to post-rv280 chips as well (thanks
	Hui) and also limit the CPU accessible memory to the size of the PCI
	BAR size (yeah, it was passed to the driver, I just got blind for a
	while it seems)

2006-03-01  Benjamin Herrenschmidt  <benh@kernel.crashing.org>

	* src/radeon_driver.c: (RADEONInitMemoryMap),
	(RADEONPreInitConfig):
	Workaround for rv280 bug which needs the framebuffer memory mapping
	to be aligned to its own size. Also add back limit of 128Mb of mapped
	fb space for now until I fully sort out what's up with dual function
	cards. I would really need to access the PCI BAR sizes here but that
	information seem to be missing from the PCI info passed to the driver.

2006-02-27  Roland Scheidegger  <rscheidegger_lists@hispeed.ch>
	* src/atichip.h:
	* src/atichip.c:
	* src/radeon_chipset.h:
	Add the newly added (and tons of previously forgotten ones) pci ids
	to the ati wrapper too (probably not required for it to work as
	everything should default to radeon anyway there).

2006-02-26  Benjamin Herrenschmidt  <benh@kernel.crashing.org>

	* src/radeon.h:
	* src/radeon_dri.c: (RADEONDRIFinishScreenInit),
	(RADEONDRIInitPageFlip):
	* src/radeon_driver.c: (RADEONScreenInit):
	Fix page flipping with XAA. The new code ended up calling
	ShadowFBInit() before XAAInit(), which breaks ShadowFB.

2006-02-24  Roland Scheidegger  <rscheidegger_lists@hispeed.ch>
	* src/radeon.h:
	* src/radeon_chipset.h:
	* src/radeon_driver.c:
	* src/radeon_probe.c:
	Add pci ids known to exist (see #4284 for instance). There are still
	entries which probably don't really exist (cancelled cards and such),
	leave them as-is. Fix the name of some entries, mostly based on the
	.inf file of the newest catalyst driver. Use own family id for rv410
	and rs400, though there is no different code (yet?).

2006-02-17  Benjamin Herrenschmidt  <benh@kernel.crashing.org>

	* src/radeon.h:
	* src/radeon_common.h:
	* src/radeon_commonfuncs.c: (RADEONWaitForIdle):
	* src/radeon_cursor.c: (RADEONCursorAllocEXA),
	(RADEONSetCursorColors), (RADEONSetCursorPosition),
	(RADEONLoadCursorImage), (RADEONHideCursor), (RADEONShowCursor),
	(RADEONLoadCursorARGB), (RADEONCursorInit):
	* src/radeon_dri.c: (RADEONDRIScreenInit),
	(RADEONDRIFinishScreenInit), (RADEONDRICloseScreen),
	(RADEONDRIRefreshArea):
	* src/radeon_driver.c: (RADEONMapFB), (RADEONInitMemMapRegisters),
	(RADEONInitMemoryMap), (RADEONGetAccessibleVRAM),
	(RADEONPreInitConfig), (RADEONLoadPalette), (RADEONBlockHandler),
	(RADEONScreenInit), (RADEONRestoreMemMapRegisters),
	(RADEONAdjustMemMapRegisters), (RADEONRestoreSurfaces),
	(RADEONSaveSurfaces), (RADEONChangeSurfaces), (RADEONRestoreMode),
	(RADEONSaveMemMapRegisters), (RADEONSaveMode), (RADEONSave),
	(RADEONInitDispBandwidth), (RADEONInitPLLRegisters),
	(RADEONInitPLL2Registers), (RADEONInit), (RADEONModeInit),
	(RADEONSaveScreen), (RADEONSwitchMode), (RADEONDoAdjustFrame),
	(RADEONAdjustFrame), (RADEONEnterVT), (RADEONLeaveVT),
	(RADEONCloseScreen), (RADEONDisplayPowerManagementSet):
	* src/radeon_reg.h:
	* src/radeon_render.c: (RADEONSetupRenderByteswap):
	Memory map and misc fixes. This completely reworks the way the driver
	detects available & accessible video memory and initializes the card
	internal memory map. Along the way, I re-ordered some of the stuffs
	in pre-init in order to remove some dodgy codepath, fixed various
	init, exit and vt switch issues, and overall made the driver more
	robust. The full memory map fix requires an updated DRM. The X driver
	no longer tries to position the AGP aperture, this becomes entirely
	DRM responsibility.

2006-02-16  Benjamin Herrenschmidt  <benh@kernel.crashing.org>

	* src/radeon_accel.c: (RADEONEngineRestore):
	The engine setup would trigger a bogus line write before the proper
	addresses are setup, thus causing the card to try to bus master over
	the system bus to some stale location (usually 0 but could depend on
	whatever was used before X). Remove that useless init bit, and always
	setup some good enough engine source & destination pointers in case we
	have some other spurrious engine activity going on.

2006-02-13  Benjamin Herrenschmidt <benh@kernel.crashing.org>

	* src/radeon_exa_render.c: (R100TextureSetup), (R200TextureSetup):
	Fix EXA acceleration of textures with byteswap or tiling
	From John Clemens <john@deater.net>

2006-02-06  Eric Anholt  <anholt@FreeBSD.org>

	* src/radeon_exa_render.c:
	Fix a copy'n'paste-o in the EXA render implementation that resulted in
	[ax]8b8g8r8 pict formats not being supported on r200, but no other
	issues.

2006-01-19  Daniel Stone  <daniel@freedesktop.org>

	* src/radeon_driver.c:
	Bug #5656: Set all Radeon XPRESS 200 R[CS]4xx-based chips to
	have IsIGP = 1, fixing modesetting issues.

2006-01-12  Alan Coopersmith  <alan.coopersmith@sun.com>

	* src/theatre200_module.c (theatre200VersRec): 
	* src/theatre_detect_module.c (theatre_detectVersRec): 
	XF86_VERSION_CURRENT -> XORG_VERSION_CURRENT

2006-01-12  Alan Coopersmith  <alan.coopersmith@sun.com>	

	* src/radeon_driver.c (RADEONPreInitModes): 
	When failing to parse MetaModes, reset CRT2pScrn to NULL after 
	free'ing it so we don't crash when trying to use it later 
	(such as in RADEONFreeRec).

2006-01-08  Adam Jackson  <ajax@freedesktop.org>

	* src/radeon.h:
	Bug #5523: Make radeon compile without USE_XAA.  (Tilman Sauerbeck)

2005-12-20  Kevin E. Martin  <kem-at-freedesktop-dot-org>

	* configure.ac:
	Update package version for X11R7 release.

2005-12-19  Alan Coopersmith  <alan.coopersmith@sun.com>

	* README.ati.sgml:
	* man/radeon.man:
	Typo fixes, mailing list & url updates, and other changes
        to prepare for X11R6.9 & 7.0 releases.

2005-12-15  Alan Coopersmith  <alan.coopersmith@sun.com>

	* man/r128.man: 
	Bugzilla #5238 <https://bugs.freedesktop.org/show_bug.cgi?id=5238>
	Patch #3978  <https://bugs.freedesktop.org/attachment.cgi?id=3978>
	r128 man page dualhead note update (Alex Deucher)

2005-12-14  Kevin E. Martin  <kem-at-freedesktop-dot-org>

	* configure.ac:
	* src/r128_version.h:
	* src/radeon_version.h:
	Update package version number for final X11R7 release candidate.
	Bump driver version number.

2005-12-14  Adam Jackson  <ajax@freedesktop.org>

	* src/r128_accel.c:
	* src/r128_driver.c:
	* src/radeon_driver.c:
	* src/radeon_probe.c:
	Bug #1760: Fix ati wrapper multihead to be dlloader friendly.

2005-12-08  Kevin E. Martin  <kem-at-freedesktop-dot-org>

	* src/Makefile.am:
	Add configure options to allow hard-coded paths to be changed.

2005-12-06  Kevin E. Martin  <kem-at-freedesktop-dot-org>

	* man/Makefile.am:
	Change *man_SOURCES ==> *man_PRE to fix autotools warnings.

2005-12-03  Kevin E. Martin  <kem-at-freedesktop-dot-org>

	* configure.ac:
	Update package version number for X11R7 RC3 release.

2005-12-01  Kevin E. Martin  <kem-at-freedesktop-dot-org>

	* configure.ac:
	Remove extraneous AC_MSG_RESULT.

2005-11-20  Adam Jackson  <ajax@freedesktop.org>

	* configure.ac:
	Bump libdrm dep to 2.0.

2005-11-29  Adam Jackson  <ajax@freedesktop.org>

	* configure.ac:
	Only build dlloader modules by default.

2005-11-09  Kevin E. Martin  <kem-at-freedesktop-dot-org>

	* configure.ac:
	Update package version number for X11R7 RC2 release.

2005-11-01  Kevin E. Martin  <kem-at-freedesktop-dot-org>

	* configure.ac:
	Update pkgcheck depedencies to work with separate build roots.

2005-10-20  Donnie Berkholz  <spyderous@gentoo.org>

	* configure.ac: Bug #4831
	<https://bugs.freedesktop.org/show_bug.cgi?id=4831>. Check for x86_64 in
	addition to amd64 in host_cpu.
